<div class="p-6 min-h-screen" style="background-color: var(--bg-primary); color: var(--text-primary);">

  <h1 class="text-3xl font-bold mb-6">Pokémon Catalogue</h1>

  <!-- Search Bar -->
  <div class="mb-6">
    <input 
      [(ngModel)]="searchTerm"
      (input)="onSearchChange()"
      placeholder="Search Pokémon..."
      class="w-full px-4 py-2 rounded-lg border focus:border-blue-500 focus:outline-none"
      style="background-color: var(--bg-secondary); color: var(--text-primary); border-color: var(--text-secondary);">
  </div>

  <!-- Deferrable Pokemon Grid -->
  @defer (when !loading()) {
    <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4">
      @for (p of filteredPokemon(); track p.name) {
        <app-pokemon-card 
          [pokemon]="p" 
          [isCollected]="isCollected(p.name)"
          (catchPokemon)="catchPokemon($event)">
        </app-pokemon-card>
      }
    </div>
  } @placeholder {
    <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4">
      @for (i of [1,2,3,4,5,6,7,8]; track i) {
        <div class="rounded-xl p-4 flex flex-col items-center animate-pulse" style="background-color: var(--bg-secondary);">
          <div class="w-20 h-20 rounded mb-3" style="background-color: var(--text-secondary);"></div>
          <div class="w-16 h-4 rounded mb-2" style="background-color: var(--text-secondary);"></div>
          <div class="w-12 h-6 rounded" style="background-color: var(--text-secondary);"></div>
        </div>
      }
    </div>
  } @error {
    <div class="text-center py-8">
      <p class="text-red-400 text-xl">Failed to load Pokémon</p>
      <button (click)="loadPokemon()" class="mt-4 px-4 py-2 bg-blue-500 rounded text-white">Retry</button>
    </div>
  } 

  <!-- Next Button -->
  <div class="fixed bottom-6 right-6">
    <button 
      (click)="goToTrainer()"
      class="px-6 py-3 bg-red-500 hover:bg-red-600 rounded-lg text-white font-bold">
      Next →
    </button>
  </div>

</div>
